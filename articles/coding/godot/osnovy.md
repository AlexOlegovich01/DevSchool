# Основы Godot

## Интерфейс и основные понятия

Godot как и Unity состоит из окон. Слева расположено окно для работы с нодами. Чуть пониже располагается браузер с иерархией папок. По центру окно вида, а справа находится Инспектор, в котором можно менять свойства нод.

Ноды и сцены - очень важные понятия в Godot. Ноды - это компоненты игры. С сценами же все немного сложнее, поскольку сцена может быть как сцена с Миром уровня или Локацией, так и быть частью другой сцены как префаб в Unity.

Чтобы проще разобраться с сценами и компонентами, давайте представим платформер. В нем есть задний фон, трубы и платформы, а так же есть персонаж. Все эти объекты находятся в базовой сцене, которая является корневой - можно это назвать сценой мира. Но будет удобнее если в корневой сцене создать отдельно сцену для платформ и труб и отдельную сцену для персонажа. Таким образом, сцены выступают в роли как отдельных локаций, так и в роли префабов, которые можно сохранить и использовать повторно.


## Начало работы

После запуска нужно создать новый проект или импортировать существующий. Далее нужно в окне нодов создать сцену, нажав на соответствующую кнопку в окне нодов. Теперь можно добавлять дочерние элементы, нажав на Плюс, через ПКМ или перетащив нужный объект.

Новые сцены расположены в виде вкладок в окне просмотра. Для создания новой сцены можно нажать на Плюс правее от вкладки с сценой. Для сохранения сцены нажмите в топбаре Сцена/Сохранить как. Для того, чтобы Сцену А переместить внутрь Сцены Б, выберите Сцену А в окне нодов. Далее нажмите на кнопку рядом с плюсом (в русском интерфейсе, если подержать над кнопкой мышку, появится подсказка Создать экземпляр дочерней сцены) и выберите ту сцену, которую хотите добавить. Обратите внимание, что в окне нодов, справа от названия сцены есть значок камеры. Нажав на него, можно перейти в редактирование выбранной сцены.


## Изменить разрешение экрана

Нажмите на _Проект/Настройки проекта, чтобы открыть окно настроек проекта. В левой колонке откройте вкладку Дисплей/Окно_. Установите ширину и высоту. В опции Растягивание установите Режим в Canvas_items и Соотношение в keep. 

### Определение размера окна в скрипте

```
func _ready():
    screen_size = get_viewport_rect().size
```


## TileMap

В Godot есть встроенный инструмент для работы с TileMap - изображением, которое содержит в себе набор спрайтов, которые именуются тайлами. Например, в одной картинке могут быть тайлы стен или же мобов.

### Создание TileMap

Для создания тайловой картинки нужно использовать формат изображения с поддержкой Альфы - то есть прозрачности. Первый тайл должен быть пустым. Ниже будет представлен схематичный образец тайлового изображения.

| Empty | Tile1 | Tile2 |
| ----- | ----- | ----- |
| Tile3 | Tile4 | Tile5 |
| Tile6 | Tile7 | Tile8 |

1. Добавьте ноду Tilemap. В Инспекторе есть поле Tile Set - нужно нажать и Создать новый. Далее нажать по созданному тайлсету и откроется окно работы с ними. Здесь нужно посмотреть на вкладки, что расположены внизу данного окна и перейти в Набор тайлов. Далее, в левое пространство, можно перетащить нужную картинку - появится рамка, где нужно согласиться и картинка будет нарезана на тайлы.
2. Размер тайлов можно изменить здесь же в Размер области текстуры.
3. Перейдите в вкладку Карта тайлов, чтобы начать рисовать тайлами. Просто выберите нужный сегмент и рисуйте.
4. По умолчанию сетка привязки тайлов имеет разрешение 16 пикселей, что не всегда удобно. Изменить ее можно, щелкнув по созданному тайлсету и установив свои значения в Tile Size.