# Физика

## Rigid Body

**Rigid Body** - физика твердого тела.

Если просто назначить этот компонент на тело и запустить игру, тело начнет падать и сталкиваться со всеми коллайдерами в сцене.

### Параметры
- **Mass** - масса
- **Drag** - сопротивление воздуха
- **Angular Drag** - замедление скорости вращения
- **Use Gravity** - гравитация
- **Is Kinematic** - активирует физику объекта
- **Collision Detection** - взаимодействие с другими объектами. Continuous - пытается отключить проникновение одних объектов в другие. Работает с статичными объектами. Для динамических объектов лучше использовать Continuous Dynamic.
- **Constraints** - ограничители

## Colliders

**Collider** - физическая форма объекта.

#### Параметры
- **Edit Collider** - редактирование формы коллайдера
- **Is Trigger** - помечает коллайдер как триггер.

**Mesh Collider** - коллайдер принимает форму объекта. Обязательно ставить галочку в **Convex**. Это позволяет обернуть меш коллайдером.

### Параметр Material

Сюда помещается физический материал, который можно создать. Для его создания в окне **Project** нужно нажать **ПКМ/Create/Physic Material**

#### Параметры физических материалов
- **Dynamic Friction** - динамическое трение
- **Static Friction** - статическое трение
- **Bounciness** - прыгучесть.

По производительности Sphere Collider самый легкий.

## Физические слои

Рассмотрим ситуацию. Есть пол, над ним есть плоскость, а над плоскостью есть красный и синий шар. Красный шар приземляется на плоскость, а синий проходит плоскость насквозь и приземляется на пол.

Все объекты расположены по слоям. По умолчанию - это слой **Default**. Если выделить объект, в Инспекторе будет вкладка **Layer**. Можно развернуть список и нажать **Add Layer** для того, чтобы создать новый слой. Пояаится список с полями, где с 8 поля можно вписать имя нового слоя. Для каждого объекта назначаем слой, далее переходим в **Project Settings** и отключаем взаимодействия нужных слоев в вкладке **Physics**. Рекомендуется убирать все галочки с тех слоев, между которыми не должно быть взаимодействия.

## Силы воздействия

Рассмотрим силы воздействия на объект.

### AddForce, Fixed Update

``` csharp
public class SCRAddForce : MonoBehaviour
{
    // Start is called before the first frame update
    private Rigidbody rb;
    void Awake()
    {
        rb = GetComponent<Rigidbody>();
    }
    
    // Update is called once per frame
    void FixedUpdate()
    {
        if (Input.GetKey(KeyCode.W))
        {
            rb.AddForce(5, 0f, 0f);
        }
    }
}
```

В данном случае при нажатии на W, объект, на который назначен скрипт, будет ускоряться.

Для прыжка блок кода помещаем в метод **Update**.

```csharp
void Update()
    {
        if (Input.GetKeyDown(KeyCode.Space))
        {
            rb.AddForce(0f, 200, 0f);
        }
    }
```

### ForceMode

**ForceMode** - это параметр AddForce.

Рассмотрим предыдущий пример с применением ForceMode.

```csharp
rb.AddForce(0f, 200, 0f, ForceMode.Force);
```

#### Параметры ForceMode
- **Force** - используется по умолчанию. Зависит от массы объекта.
- **Acceleration** - параметр ускорения. Не зависит от массы объекта.
- **Impulse** - импульс. Зависит от массы.
- **VelosityChange** - Скорость. Не зависит ни от массы, ни от времени.

### Локальные координаты и вращение

```csharp
rb.AddRelativeForce(0f, 0f, 100); # движение объекта по локальным координатам.
rb.AddTorque(0f, 0f, 100); # Угол поворота в глобальных координатах.
rb.AddRelativeTorque(0f, 0f, 100); # Угол поворота в локальных координатах.
```

[:rewind:**Вернуться назад**](../../../../README.md)