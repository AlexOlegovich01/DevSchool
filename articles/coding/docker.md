# Docker


Docker нужен для сборки, транспортировки и запуска приложений в контейнерами, которые являются изолированными виртуальными средами. программа, которая должна запускаться в Docker, называется образом, а запущенная программа - контейнером.

После установки проще пользоваться Докером из терминала.

```cmd
docker images # Показать образы
docker ps # Показать контейнеры
```

..................................................Пример простой работы с Docker..................................................

Создадим простой Python файл с следующим содержимым.
```python
print("Hello, World")
```

Далее нужно создать файл с именем Dockerfile рядом с файлом. Это нужно, для того, чтоб Докер понимал где и как ему работать. Содержимое файла ниже.

```dockerfile
FROM python:3.6
RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app
COPY . /usr/src/app
CMD ["python","main.py"]
```

Образ создается 1 раз и изменить его не удастся - только пересоздать. В примере выше в первой строке указан образ, который будет взят за основу - в данном случае это Python. Во второй строке выполняется команда, которая создает в образе рекурсивно папки. В третьей строке идет переход в папку app. В четвертой строке идет копирование всех файлов проекта в образ, а конкретно в папку app. После этого, в пятой строке запускается питоновский файл на выполнение.

Далее нужно ввести команду `docker build -t названиеОбраза .`. Имя не должно иметь заглавные буквы. После ввода команды Docker ищет python локально. Если его нет, он загружает образ из DockerHub. Так же идет докачка и других зависимостей. Для запуска нужно ввести `docker run названиеОбраза`.

..................................................................................................................................



После отработки программы контейнер деактивируется, но не исчезает. Чтобы увидеть все контейнеры нужно выполнить `docker ps -a`.

для удаления контейнера можно использовать `docker rm контейнер` на место контейнер можно передать имя, идентификатор и так далее. Если нужно удалить все неактивные контейнеры, то можно написать `docker container prum` Для того, чтобы контейнер удалился автоматически после выполнения можно ввести `docker run --rm айдиКонтейнера`.

Для запуска  в фоновом режиме воспользуйтесь `docker run -d названиеОбраза`. Для остановки контейнера введите `docker stop АайдиКонтейнера`.

Для удаления образа воспользуйтесь `docker rmi образ`.Или для удаления всех неиспользуемых образов `docker image prum`.

## Установка модулей Python

Для установки модулей можно поступить следующими способами. Создать в проекте файл requirements.txt и в него вписать те библиотеки, которые нужно установить. Можно указать версию библиотеки, поставив двойное равно и указав версию. Далее в Dockerfile перед последней строкой написать `RUN pip install --no-cache-dir -r requirements.txt`. Параметр no-cache-dir нужен, чтобы не создавать папку с кэшем и тем самым немного разгрузить проект.